<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‹•æ£®å…¨èƒ½æ”»ç•¥ V3.0</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* --- 1. è¨­è¨ˆç³»çµ± --- */
        :root {
            --bg-cream: #F8F5E8;
            --nook-green: #8DD2BA;
            --nook-dark: #58B09C;
            --text-main: #58534A;
            --card-white: #FFFFFF;
            --tab-active: #F4A261;
            --shadow: 4px 4px 0px rgba(0,0,0,0.1);
            --radius: 20px;
        }

        body {
            background-color: var(--bg-cream);
            color: var(--text-main);
            font-family: 'Varela Round', "Microsoft JhengHei", sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        /* --- 2. é ‚éƒ¨å°èˆª --- */
        header {
            background: var(--nook-green);
            width: 100%;
            padding: 20px 0;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        h1 { margin: 0; color: white; font-size: 1.5rem; letter-spacing: 2px; }

        .progress-container {
            width: 80%;
            max-width: 600px;
            background: rgba(255,255,255,0.3);
            border-radius: 20px;
            margin: 15px auto 0;
            overflow: hidden;
            height: 10px;
        }

        .progress-bar {
            height: 100%;
            background: #FFD54F;
            width: 0%;
            transition: width 0.5s ease;
        }

        .stats-text { color: white; font-size: 0.9rem; margin-top: 5px; }

        /* --- 3. å·¥å…·åˆ— --- */
        .toolbar {
            width: 95%;
            max-width: 1000px;
            margin: 20px 0;
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: center;
        }

        /* æœå°‹èˆ‡ç¯©é¸ */
        .search-row {
            display: flex;
            width: 100%;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .search-box {
            flex: 1;
            position: relative;
            min-width: 200px;
            max-width: 400px;
        }

        .search-box input {
            width: 100%;
            padding: 12px 40px 12px 20px;
            border-radius: 30px;
            border: 2px solid var(--nook-green);
            outline: none;
            font-size: 1rem;
            box-sizing: border-box;
        }
        
        .search-box i {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #aaa;
        }

        .btn-toggle {
            padding: 8px 16px;
            border-radius: 20px;
            border: 2px solid var(--nook-green);
            background: white;
            cursor: pointer;
            font-weight: bold;
            color: var(--nook-dark);
            transition: 0.2s;
            white-space: nowrap;
        }

        .btn-toggle.active { background: var(--nook-green); color: white; }

        /* --- 4. å¯æ»‘å‹•çš„åˆ†é ç±¤ (Tabs) --- */
        .tabs-container {
            width: 100%;
            overflow-x: auto;
            white-space: nowrap;
            padding-bottom: 5px; /* éš±è—æ²è»¸é€ æˆçš„è²¼åº• */
            text-align: center;
        }

        /* éš±è—æ²è»¸æ¨£å¼ */
        .tabs-container::-webkit-scrollbar { display: none; }

        .tab-btn {
            display: inline-block;
            padding: 10px 20px;
            background: #E0E0E0;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 1rem;
            color: #777;
            margin: 0 5px;
            transition: 0.3s;
        }

        .tab-btn.active {
            background: var(--tab-active);
            color: white;
            box-shadow: var(--shadow);
            transform: translateY(-2px);
        }

        /* --- 5. ç¶²æ ¼èˆ‡å¡ç‰‡ --- */
        #grid-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 15px;
            width: 95%;
            max-width: 1200px;
            padding-bottom: 40px;
        }

        .card {
            background: var(--card-white);
            border-radius: var(--radius);
            padding: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: var(--shadow);
            border: 2px solid transparent;
            position: relative;
            cursor: pointer;
            transition: 0.2s;
        }

        .card:hover { transform: translateY(-3px); border-color: var(--nook-green); }

        .card.caught { background: #E8F5E9; opacity: 0.7; border: 2px solid #81C784; }
        .card.caught::after {
            content: "âœ”";
            position: absolute;
            top: 10px; right: 10px;
            background: #4CAF50; color: white;
            width: 25px; height: 25px;
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 0.8rem;
        }

        .card-icon {
            width: 50px; height: 50px;
            background: #F0F4C3;
            border-radius: 50%;
            display: flex; justify-content: center; align-items: center;
            font-size: 25px;
            flex-shrink: 0;
        }

        .card-info { flex: 1; }
        .card-info h3 { margin: 0 0 5px 0; font-size: 1.1rem; }
        
        .meta-tags { font-size: 0.85rem; color: #666; margin-top: 5px; line-height: 1.4; }
        
        .time-badge {
            display: inline-block;
            font-size: 0.75rem;
            padding: 2px 8px;
            border-radius: 10px;
            margin-top: 5px;
        }
        .bg-active { background: #C8E6C9; color: #2E7D32; }
        .bg-inactive { background: #FFCDD2; color: #C62828; }
        .price-tag { color: #F57F17; font-weight: bold; }
        
    </style>
</head>
<body>

    <header>
        <h1>ğŸï¸ å‹•æ£®å…¨èƒ½æ”»ç•¥</h1>
        <div class="stats-text" id="stats-display">è¼‰å…¥ä¸­...</div>
        <div class="progress-container">
            <div class="progress-bar" id="progress-bar"></div>
        </div>
    </header>

    <div class="toolbar">
        <div class="tabs-container">
            <button class="tab-btn active" onclick="switchTab('fish')">ğŸŸ é­šé¡</button>
            <button class="tab-btn" onclick="switchTab('bug')">ğŸ¦‹ æ˜†èŸ²</button>
            <button class="tab-btn" onclick="switchTab('sea')">ğŸ¤¿ æµ·æ´‹ç”Ÿç‰©</button>
            <button class="tab-btn" onclick="switchTab('fossil')">ğŸ¦• åŒ–çŸ³</button>
            <button class="tab-btn" onclick="switchTab('material')">ğŸ¥¥ ç´ æ</button>
            <button class="tab-btn" onclick="switchTab('furniture')">ğŸª‘ å®¶å…·</button>
        </div>

        <div class="search-row">
            <div class="search-box">
                <input type="text" id="search-input" placeholder="è¼¸å…¥åç¨±æœå°‹..." oninput="handleSearch()">
                <i class="fas fa-search"></i>
            </div>
            <button class="btn-toggle" id="btn-now" onclick="toggleNow()">â° åªçœ‹ç¾åœ¨</button>
            <button class="btn-toggle" id="btn-uncaught" onclick="toggleUncaught()">â¬œ åªçœ‹æœªæŠ“</button>
        </div>
    </div>

    <div id="grid-container">
        </div>

    <script>
        // --- 1. è³‡æ–™åº« (å·²æ•´åˆæ‚¨æä¾›çš„æ‰€æœ‰è³‡æ–™) ---
        
        // é­šé¡ (ä¿ç•™V2.1å®Œæ•´ç‰ˆ)
        const fishData = [
          { "id": "f1", "name": "å°ä¸‘é­š", "months": [4, 5, 6, 7, 8, 9], "time": [0, 24], "price": 650, "loc": "å¤§æµ·", "shadow": "ç‰¹å°" },
          { "id": "f2", "name": "ä¸­è¯çµ¨è¯èŸ¹", "months": [9, 10, 11], "time": [16, 9], "price": 2000, "loc": "æ²³å·", "shadow": "å°" },
          { "id": "f3", "name": "äº”å½©é°»", "months": [6, 7, 8, 9, 10], "time": [0, 24], "price": 600, "loc": "å¤§æµ·", "shadow": "ç´°é•·" },
          { "id": "f4", "name": "å¤ªå¹³æ´‹æ¡¶çœ¼é­š", "months": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12], "time": [21, 4], "price": 15000, "loc": "å¤§æµ·", "shadow": "å°" },
          { "id": "f5", "name": "å­”é›€é­š", "months": [4, 5, 6, 7, 8, 9, 10, 11], "time": [9, 16], "price": 1300, "loc": "æ²³å·", "shadow": "ç‰¹å°" },
          { "id": "f6", "name": "æ¯”ç›®é­š", "months": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12], "time": [0, 24], "price": 800, "loc": "å¤§æµ·", "shadow": "å¤§" },
          { "id": "f7", "name": "å·¨éª¨èˆŒé­š", "months": [6, 7, 8, 9], "time": [16, 9], "price": 10000, "loc": "æ²³å·", "shadow": "ç‰¹å¤§" },
          { "id": "f8", "name": "ç™½æ–‘ç‹—é­š", "months": [9, 10, 11, 12], "time": [0, 24], "price": 1800, "loc": "æ²³å·", "shadow": "å¤§" },
          { "id": "f9", "name": "çŸ›å°¾é­š", "months": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12], "time": [0, 24], "price": 15000, "loc": "å¤§æµ·(é›¨)", "shadow": "ç‰¹å¤§" },
          { "id": "f10", "name": "ç«¹ç­´é­š", "months": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12], "time": [0, 24], "price": 150, "loc": "å¤§æµ·", "shadow": "å°" },
          { "id": "f11", "name": "è€³å¸¶è´è¶é­š", "months": [4, 5, 6, 7, 8, 9], "time": [0, 24], "price": 1000, "loc": "å¤§æµ·", "shadow": "å°" },
          { "id": "f12", "name": "è¥¿å¤ªå…¬é­š", "months": [1, 2, 12], "time": [0, 24], "price": 500, "loc": "æ²³å·", "shadow": "å°" },
          { "id": "f13", "name": "å³éƒ­é­š", "months": [6, 7, 8, 9, 10], "time": [0, 24], "price": 800, "loc": "æ²³å·", "shadow": "ä¸­åå°" },
          { "id": "f14", "name": "å¸ç›¤é­š", "months": [6, 7, 8, 9], "time": [0, 24], "price": 1500, "loc": "å¤§æµ·", "shadow": "èƒŒé°­" },
          { "id": "f15", "name": "åˆºæ²³è±š", "months": [7, 8, 9], "time": [0, 24], "price": 250, "loc": "å¤§æµ·", "shadow": "ä¸­åå°" },
          { "id": "f16", "name": "æ²³è±š", "months": [1, 2, 11, 12], "time": [18, 4], "price": 5000, "loc": "å¤§æµ·", "shadow": "ä¸­" },
          { "id": "f17", "name": "æ³¥é°", "months": [3, 4, 5], "time": [0, 24], "price": 400, "loc": "æ²³å·", "shadow": "å°" },
          { "id": "f18", "name": "èŠ±ç¾”ç´…é»é®­", "months": [3, 4, 5, 6, 9, 10, 11], "time": [16, 9], "price": 3800, "loc": "æ‡¸å´–", "shadow": "ä¸­åå¤§" },
          { "id": "f19", "name": "é‡‘é­š", "months": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12], "time": [0, 24], "price": 1300, "loc": "æ± å¡˜", "shadow": "ç‰¹å°" },
          { "id": "f20", "name": "é‡‘é±’", "months": [3, 4, 5, 9, 10, 11], "time": [16, 9], "price": 15000, "loc": "æ‡¸å´–", "shadow": "ä¸­åå°" },
          { "id": "f21", "name": "é’è›™", "months": [5, 6, 7, 8], "time": [0, 24], "price": 120, "loc": "æ± å¡˜", "shadow": "å°" },
          { "id": "f22", "name": "å¸ç‹é®­", "months": [9], "time": [0, 24], "price": 10000, "loc": "æ²³å£", "shadow": "å¤§" },
          { "id": "f23", "name": "çš‡å¸¶é­š", "months": [1, 2, 3, 4, 5, 12], "time": [0, 24], "price": 9000, "loc": "å¤§æµ·", "shadow": "ç‰¹å¤§" },
          { "id": "f24", "name": "ç´…ç›®é¯½", "months": [1, 2, 3, 11, 12], "time": [0, 24], "price": 900, "loc": "æ²³å·", "shadow": "ç‰¹å°" },
          { "id": "f25", "name": "é£Ÿäººé­š", "months": [6, 7, 8, 9], "time": [9, 16], "price": 2500, "loc": "æ²³å·", "shadow": "å°" },
          { "id": "f26", "name": "é¦™é­š", "months": [7, 8, 9], "time": [0, 24], "price": 900, "loc": "æ²³å·", "shadow": "ä¸­åå°" },
          { "id": "f27", "name": "æ©æ°å¤šé°­é­š", "months": [6, 7, 8, 9], "time": [21, 4], "price": 4000, "loc": "æ²³å·", "shadow": "ä¸­åå¤§" },
          { "id": "f28", "name": "æµªäººé°º", "months": [5, 6, 7, 8, 9, 10], "time": [0, 24], "price": 4500, "loc": "ç¢¼é ­", "shadow": "å¤§" },
          { "id": "f29", "name": "æµ·å¤©ä½¿", "months": [1, 2, 3, 12], "time": [0, 24], "price": 1000, "loc": "å¤§æµ·", "shadow": "ç‰¹å°" },
          { "id": "f30", "name": "æµ·é¦¬", "months": [4, 5, 6, 7, 8, 9, 10, 11], "time": [0, 24], "price": 1100, "loc": "å¤§æµ·", "shadow": "ç‰¹å°" },
          { "id": "f31", "name": "ç æ˜Ÿä¸‰å¡Šé­š", "months": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12], "time": [16, 9], "price": 240, "loc": "æ²³å·", "shadow": "ä¸­åå°" },
          { "id": "f32", "name": "ç¥ä»™é­š", "months": [5, 6, 7, 8, 9, 10], "time": [16, 9], "price": 3000, "loc": "æ²³å·", "shadow": "å°" },
          { "id": "f33", "name": "éª¨èˆŒé­š", "months": [6, 7, 8, 9], "time": [16, 9], "price": 10000, "loc": "æ²³å·", "shadow": "ä¸­åå¤§" },
          { "id": "f34", "name": "é¬¥é­š", "months": [5, 6, 7, 8, 9, 10], "time": [9, 16], "price": 2500, "loc": "æ²³å·", "shadow": "å°" },
          { "id": "f35", "name": "é¬¼é ­åˆ€", "months": [5, 6, 7, 8, 9, 10], "time": [0, 24], "price": 6000, "loc": "ç¢¼é ­", "shadow": "å¤§" },
          { "id": "f36", "name": "å½©è™¹é­š", "months": [5, 6, 7, 8, 9, 10], "time": [9, 16], "price": 800, "loc": "æ²³å·", "shadow": "ç‰¹å°" },
          { "id": "f37", "name": "æ¢çŸ³é¯›", "months": [3, 4, 5, 6, 7, 8, 9, 10, 11], "time": [0, 24], "price": 5000, "loc": "å¤§æµ·", "shadow": "ä¸­åå°" },
          { "id": "f38", "name": "æ·¡æ°´é¾è¦", "months": [4, 5, 6, 7, 8, 9], "time": [0, 24], "price": 200, "loc": "æ± å¡˜", "shadow": "å°" },
          { "id": "f39", "name": "é›€é±”", "months": [7, 8, 9, 10], "time": [16, 9], "price": 6000, "loc": "æ± å¡˜", "shadow": "å¤§" },
          { "id": "f40", "name": "é»ƒé‡‘æ²³è™", "months": [6, 7, 8, 9], "time": [4, 21], "price": 15000, "loc": "æ²³å·", "shadow": "å¤§" },
          { "id": "f41", "name": "é»ƒé±¸é­š", "months": [1, 2, 3, 10, 11, 12], "time": [0, 24], "price": 300, "loc": "æ²³å·", "shadow": "ä¸­åå°" },
          { "id": "f42", "name": "é»‘é­š", "months": [6, 7, 8], "time": [9, 16], "price": 5500, "loc": "æ± å¡˜", "shadow": "ä¸­åå¤§" },
          { "id": "f43", "name": "é»‘é±¸é­š", "months": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12], "time": [0, 24], "price": 400, "loc": "æ²³å·", "shadow": "ä¸­åå¤§" },
          { "id": "f44", "name": "å¡˜é±§é­š", "months": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12], "time": [16, 9], "price": 400, "loc": "æ²³å·", "shadow": "å°" },
          { "id": "f45", "name": "æºªå“¥", "months": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12], "time": [9, 16], "price": 200, "loc": "æ²³å·", "shadow": "ç‰¹å°" },
          { "id": "f46", "name": "æº«æ³‰é†«ç”Ÿé­š", "months": [5, 6, 7, 8, 9], "time": [9, 16], "price": 1500, "loc": "æ²³å·", "shadow": "ç‰¹å°" },
          { "id": "f47", "name": "ç…å­é­š", "months": [4, 5, 7, 8, 9, 10, 11], "time": [0, 24], "price": 500, "loc": "å¤§æµ·", "shadow": "ä¸­åå°" },
          { "id": "f48", "name": "æ——é­š", "months": [1, 2, 3, 4, 7, 8, 9, 11, 12], "time": [0, 24], "price": 10000, "loc": "ç¢¼é ­", "shadow": "ç‰¹å¤§" },
          { "id": "f49", "name": "è£¸èƒ¸é±”", "months": [8, 9, 10], "time": [0, 24], "price": 2000, "loc": "å¤§æµ·", "shadow": "ç´°é•·" },
          { "id": "f50", "name": "é æ±å“²ç¾…é­š", "months": [1, 2, 3, 12], "time": [16, 9], "price": 15000, "loc": "æ‡¸å´–", "shadow": "ç‰¹å¤§" },
          { "id": "f51", "name": "é­Ÿé­š", "months": [8, 9, 10, 11], "time": [4, 21], "price": 3000, "loc": "å¤§æµ·", "shadow": "å¤§" },
          { "id": "f52", "name": "é³³å°¾é­š", "months": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12], "time": [4, 21], "price": 200, "loc": "å¤§æµ·", "shadow": "å°" },
          { "id": "f53", "name": "ç¨»ç”°é­š", "months": [4, 5, 6, 7, 8], "time": [0, 24], "price": 300, "loc": "æ± å¡˜", "shadow": "ç‰¹å°" },
          { "id": "f54", "name": "èŒèšª", "months": [3, 4, 5, 6, 7], "time": [0, 24], "price": 100, "loc": "æ± å¡˜", "shadow": "ç‰¹å°" },
          { "id": "f55", "name": "é­·é­š", "months": [1, 2, 3, 4, 5, 6, 7, 8, 12], "time": [0, 24], "price": 500, "loc": "å¤§æµ·", "shadow": "ä¸­åå°" },
          { "id": "f56", "name": "ç‡ˆç± é­š", "months": [1, 2, 3, 11, 12], "time": [16, 9], "price": 2500, "loc": "å¤§æµ·", "shadow": "å¤§" },
          { "id": "f57", "name": "é‹¸é¯Š", "months": [6, 7, 8, 9], "time": [16, 9], "price": 12000, "loc": "å¤§æµ·", "shadow": "èƒŒé°­" },
          { "id": "f58", "name": "éŒ¦é¯‰", "months": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12], "time": [16, 9], "price": 4000, "loc": "æ± å¡˜", "shadow": "ä¸­åå¤§" },
          { "id": "f59", "name": "éœ“è™¹ç‡ˆé­š", "months": [4, 5, 6, 7, 8, 9, 10, 11], "time": [9, 16], "price": 500, "loc": "æ²³å·", "shadow": "ç‰¹å°" },
          { "id": "f60", "name": "é¾ç›é‡‘é­š", "months": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12], "time": [9, 16], "price": 1300, "loc": "æ± å¡˜", "shadow": "ç‰¹å°" },
          { "id": "f61", "name": "æ“¬åˆºå°¾é¯›", "months": [4, 5, 6, 7, 8, 9], "time": [0, 24], "price": 1000, "loc": "å¤§æµ·", "shadow": "ç‰¹å°" },
          { "id": "f62", "name": "æ“¬é±·é¾œ", "months": [4, 5, 6, 7, 8, 9, 10], "time": [21, 4], "price": 5000, "loc": "æ²³å·", "shadow": "å¤§" },
          { "id": "f63", "name": "é®ªé­š", "months": [1, 2, 3, 4, 11, 12], "time": [0, 24], "price": 7000, "loc": "ç¢¼é ­", "shadow": "ç‰¹å¤§" },
          { "id": "f64", "name": "é®­é­š", "months": [9], "time": [0, 24], "price": 700, "loc": "æ²³å£", "shadow": "å¤§" },
          { "id": "f65", "name": "ç¿»è»Šé­š", "months": [7, 8, 9], "time": [4, 21], "price": 4000, "loc": "å¤§æµ·", "shadow": "èƒŒé°­" },
          { "id": "f66", "name": "è—é°“å¤ªé™½é­š", "months": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12], "time": [9, 16], "price": 180, "loc": "æ²³å·", "shadow": "å°" },
          { "id": "f67", "name": "é›™é«»é¯Š", "months": [6, 7, 8, 9], "time": [16, 9], "price": 8000, "loc": "å¤§æµ·", "shadow": "èƒŒé°­" },
          { "id": "f68", "name": "é¯‰é­š", "months": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12], "time": [0, 24], "price": 300, "loc": "æ± å¡˜", "shadow": "ä¸­åå¤§" },
          { "id": "f69", "name": "é¯Šé­š", "months": [6, 7, 8, 9], "time": [16, 9], "price": 15000, "loc": "å¤§æµ·", "shadow": "èƒŒé°­" },
          { "id": "f70", "name": "é¯½é­š", "months": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12], "time": [0, 24], "price": 160, "loc": "æ²³å·", "shadow": "å°" },
          { "id": "f71", "name": "é¯›é­š", "months": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12], "time": [0, 24], "price": 3000, "loc": "å¤§æµ·", "shadow": "å¤§" },
          { "id": "f72", "name": "é¯¨é¯Š", "months": [6, 7, 8, 9], "time": [0, 24], "price": 13000, "loc": "å¤§æµ·", "shadow": "èƒŒé°­" },
          { "id": "f73", "name": "é¯°é­š", "months": [5, 6, 7, 8, 9, 10], "time": [16, 9], "price": 800, "loc": "æ± å¡˜", "shadow": "å¤§" },
          { "id": "f74", "name": "è˜‡çœ‰é­š", "months": [7, 8], "time": [4, 21], "price": 10000, "loc": "å¤§æµ·", "shadow": "ç‰¹å¤§" },
          { "id": "f75", "name": "é°ˆé­š", "months": [1, 2, 3, 4, 10, 11, 12], "time": [0, 24], "price": 300, "loc": "å¤§æµ·", "shadow": "ä¸­åå°" },
          { "id": "f76", "name": "æ«»èŠ±é‰¤å»é®­", "months": [3, 4, 5, 6, 9, 10, 11], "time": [16, 9], "price": 1000, "loc": "æ‡¸å´–", "shadow": "ä¸­åå°" },
          { "id": "f77", "name": "è˜­å£½é‡‘é­š", "months": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12], "time": [9, 16], "price": 4500, "loc": "æ± å¡˜", "shadow": "å°" },
          { "id": "f78", "name": "é±‰", "months": [8, 9], "time": [16, 9], "price": 3750, "loc": "æ²³å·", "shadow": "å¤§" },
          { "id": "f79", "name": "é±˜é­š", "months": [1, 2, 3, 9, 10, 11, 12], "time": [0, 24], "price": 10000, "loc": "æ²³å£", "shadow": "å¤§" },
          { "id": "f80", "name": "é±¸é­š", "months": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12], "time": [0, 24], "price": 400, "loc": "å¤§æµ·", "shadow": "å¤§" }
        ];

        // æ˜†èŸ² (æ›´æ–°ç‚ºæ‚¨çš„å®Œæ•´è³‡æ–™)
        const bugData = [
            {id: 'b1', name: 'é»ƒé‡‘é¬¼é¬å½¢èŸ²', price: 12000, loc: 'æ¤°å­æ¨¹', months: [7,8], time: [17,8], icon: 'ğŸª²'},
            {id: 'b2', name: 'é•·é ¸é¹¿é‹¸é¬å½¢èŸ²', price: 12000, loc: 'æ¤°å­æ¨¹', months: [7,8], time: [17,8], icon: 'ğŸª²'},
            {id: 'b3', name: 'é•·æˆŸå¤§å…œèŸ²', price: 12000, loc: 'æ¤°å­æ¨¹', months: [7,8], time: [17,8], icon: 'ğŸª²'},
            {id: 'b4', name: 'å¯¶çŸ³é‡‘é¾œ', price: 10000, loc: 'æ¨¹ä¸Š', months: [7,8], time: [23,8], icon: 'ğŸª²'},
            {id: 'b5', name: 'å¤§é¬å½¢èŸ²', price: 10000, loc: 'æ¨¹ä¸Š', months: [7,8], time: [23,8], icon: 'ğŸª²'},
            {id: 'b6', name: 'ç‹¼è››', price: 8000, loc: 'åœŸåœ°', months: [11,12,1,2,3,4], time: [19,4], icon: 'ğŸ•·ï¸'},
            {id: 'b7', name: 'è å­', price: 8000, loc: 'åœŸåœ°', months: [5,6,7,8,9,10], time: [19,4], icon: 'ğŸ¦‚'},
            {id: 'b8', name: 'æ­Œåˆ©äºå¤§è§’èŠ±é‡‘é¾œ', price: 8000, loc: 'æ¤°å­æ¨¹', months: [6,7,8,9], time: [17,8], icon: 'ğŸª²'},
            {id: 'b9', name: 'ç´°èº«èµ¤é¬å½¢èŸ²', price: 8000, loc: 'æ¤°å­æ¨¹', months: [7,8], time: [17,8], icon: 'ğŸª²'},
            {id: 'b10', name: 'é«˜å¡è–©æ–¯å—æ´‹å¤§å…œèŸ²', price: 8000, loc: 'æ¤°å­æ¨¹', months: [7,8], time: [17,8], icon: 'ğŸª²'},
            {id: 'b11', name: 'è±¡å…œèŸ²', price: 8000, loc: 'æ¤°å­æ¨¹', months: [7,8], time: [17,8], icon: 'ğŸª²'},
            {id: 'b12', name: 'å½©è™¹é¬å½¢èŸ²', price: 6000, loc: 'æ¨¹ä¸Š', months: [6,7,8,9], time: [19,8], icon: 'ğŸª²'},
            {id: 'b13', name: 'å·¨ç„¡éœ¸å‹¾èœ“', price: 4500, loc: 'éš¨è™•', months: [5,6,7,8,9,10], time: [8,17], icon: 'èœ»'},
            {id: 'b14', name: 'å¤§è˜­é–ƒè¶', price: 4000, loc: 'ç©ºä¸­', months: [12,1,2,3,6,7,8,9], time: [17,20], icon: 'ğŸ¦‹'},
            {id: 'b15', name: 'äºæ­·å±±å¤§è¶', price: 4000, loc: 'èŠ±é™„è¿‘', months: [5,6,7,8,9], time: [8,16], icon: 'ğŸ¦‹'},
            {id: 'b16', name: 'çš‡è›¾', price: 3000, loc: 'æ¨¹ä¸Š', months: [4,5,6,7,8,9], time: [19,4], icon: 'ğŸ¦‹'},
            {id: 'b17', name: 'é»ƒèœ‚', price: 2500, loc: 'æ–æ¨¹', months: [1,2,3,4,5,6,7,8,9,10,11,12], time: [0,24], icon: 'ğŸ'},
            {id: 'b18', name: 'ç”°é±‰', price: 2000, loc: 'æ²³æ°´é‚Š', months: [4,5,6,7,8,9], time: [19,8], icon: 'ğŸ¦—'},
            {id: 'b19', name: 'é‹¸é¬å½¢èŸ²', price: 2000, loc: 'æ¨¹ä¸Š', months: [7,8], time: [0,24], icon: 'ğŸª²'},
            {id: 'b20', name: 'ç¨è§’ä»™', price: 1350, loc: 'æ¨¹ä¸Š', months: [7,8], time: [17,8], icon: 'ğŸª²'},
            {id: 'b21', name: 'äººé¢æ¤¿è±¡', price: 1000, loc: 'èŠ±æœµä¸Š', months: [3,4,5,6,7,8,9,10], time: [19,8], icon: 'ğŸ'},
            {id: 'b22', name: 'å¤§ç™½æ–‘è¶', price: 1000, loc: 'éš¨è™•', months: [1,2,3,4,5,6,7,8,9,10,11,12], time: [8,19], icon: 'ğŸ¦‹'},
            {id: 'b23', name: 'å¯„å±…èŸ¹', price: 1000, loc: 'æµ·é‚Š', months: [1,2,3,4,5,6,7,8,9,10,11,12], time: [19,8], icon: 'ğŸš'},
            {id: 'b24', name: 'æ·±å±±é¬å½¢èŸ²', price: 1000, loc: 'æ¨¹ä¸Š', months: [7,8], time: [0,24], icon: 'ğŸª²'},
            {id: 'b25', name: 'é¾è¨', price: 800, loc: 'æ²³/æ± å¡˜', months: [5,6,7,8,9], time: [8,19], icon: 'ğŸ'},
            {id: 'b26', name: 'èœ˜è››', price: 600, loc: 'æ–æ¨¹', months: [1,2,3,4,5,6,7,8,9,10,11,12], time: [19,8], icon: 'ğŸ•·ï¸'},
            {id: 'b27', name: 'ç«¹ç¯€èŸ²', price: 600, loc: 'æ¨¹ä¸Š', months: [7,8,9,10,11], time: [4,8], icon: 'ğŸ‹'},
            {id: 'b28', name: 'è³è‚', price: 430, loc: 'èŠ±æœµä¸Š', months: [3,4,5,6,7,8,9,10,11], time: [8,17], icon: 'ğŸ¦—'},
            {id: 'b29', name: 'èœˆèš£', price: 300, loc: 'æ•²çŸ³é ­', months: [1,2,3,4,5,6,9,10,11,12], time: [16,23], icon: 'ğŸ›'},
            {id: 'b30', name: 'è¸ç‰›', price: 250, loc: 'é›¨å¤©', months: [1,2,3,4,5,6,7,8,9,10,11,12], time: [0,24], icon: 'ğŸŒ'},
            {id: 'b31', name: 'é¼ å©¦', price: 250, loc: 'æ•²çŸ³é ­', months: [1,2,3,4,5,6,9,10,11,12], time: [23,16], icon: 'ğŸ›'},
            {id: 'b32', name: 'èœœèœ‚', price: 200, loc: 'èŠ±æœµä¸Š', months: [3,4,5,6,7], time: [8,17], icon: 'ğŸ'},
            {id: 'b33', name: 'èèŸ»', price: 80, loc: 'çˆ›å¤§é ­èœ', months: [1,2,3,4,5,6,7,8,9,10,11,12], time: [0,24], icon: 'ğŸœ'},
            {id: 'b34', name: 'è·³èš¤', price: 70, loc: 'å±…æ°‘èº«ä¸Š', months: [4,5,6,7,8,9,10,11], time: [0,24], icon: 'ğŸ›'},
            {id: 'b35', name: 'è’¼è …', price: 60, loc: 'åƒåœ¾ä¸Š', months: [1,2,3,4,5,6,7,8,9,10,11,12], time: [0,24], icon: 'ğŸª°'}
        ];

        // æµ·æ´‹ç”Ÿç‰©
        const seaData = [
            {id: 's1', name: 'å¤§ç¡¨ç£²', price: 15000, months: [5,6,7,8,9], time: [0,24], shadow: 'å¤§', icon: 'ğŸš'},
            {id: 's2', name: 'å¤§ç‹å…·è¶³èŸ²', price: 12000, months: [7,8,9,10], time: [9,16], shadow: 'å¤§', icon: 'ğŸ¦'},
            {id: 's3', name: 'å¸è¡€çƒè³Š', price: 10000, months: [5,6,7,8], time: [16,9], shadow: 'å¤§', icon: 'ğŸ¦‘'},
            {id: 's4', name: 'æ—¥æœ¬å›Šå°è¦', price: 3000, months: [6,7,8,9], time: [16,9], shadow: 'ä¸­', icon: 'ğŸ¦'},
            {id: 's5', name: 'ç æ¯è›¤', price: 2800, months: [1,2,3,4,5,6,7,8,9,10,11,12], time: [0,24], shadow: 'ä¸­', icon: 'ğŸš'},
            {id: 's6', name: 'è¦è›„', price: 2500, months: [1,2,3,4,5,6,7,8,9,10,11,12], time: [16,9], shadow: 'ä¸­', icon: 'ğŸ¦'},
            {id: 's7', name: 'é±Ÿ', price: 2500, months: [7,8,9], time: [21,4], shadow: 'ä¸­', icon: 'ğŸ¦€'},
            {id: 's8', name: 'ä¸‰ç–£æ¢­å­èŸ¹', price: 2200, months: [6,7,8,9,10,11], time: [0,24], shadow: 'å¤§', icon: 'ğŸ¦€'},
            {id: 's9', name: 'é®‘é­š', price: 2000, months: [6,7,8,9,10,11,12,1], time: [16,9], shadow: 'å¤§', icon: 'ğŸš'},
            {id: 's10', name: 'æµ·è†½', price: 1700, months: [5,6,7,8,9], time: [0,24], shadow: 'ä¸­', icon: 'ğŸš'},
            {id: 's11', name: 'å¸†ç«‹è²', price: 1200, months: [1,2,3,4,5,6,7,8,9,10,11,12], time: [0,24], shadow: 'ä¸­', icon: 'ğŸš'},
            {id: 's12', name: 'ç« é­š', price: 1200, months: [1,2,3,4,5,6,7,8,9,10,11,12], time: [0,24], shadow: 'ä¸­', icon: 'ğŸ™'},
            {id: 's13', name: 'èŠ±åœ’é°»', price: 1100, months: [5,6,7,8,9,10], time: [4,21], shadow: 'ä¸­', icon: 'ğŸ'},
            {id: 's14', name: 'æµ·æ˜Ÿ', price: 500, months: [1,2,3,4,5,6,7,8,9,10,11,12], time: [0,24], shadow: 'ä¸­', icon: 'â­'}
        ];

        // åŒ–çŸ³ (ç„¡æ™‚é–“)
        const fossilData = [
            {id: 'fo1', name: 'æš´é¾çš„é ­', price: 6000, icon: 'ğŸ¦–'},
            {id: 'fo2', name: 'è…•é¾çš„é ­', price: 6000, icon: 'ğŸ¦•'},
            {id: 'fo3', name: 'æš´é¾çš„èº«é«”', price: 5500, icon: 'ğŸ¦–'},
            {id: 'fo4', name: 'ä¸‰è§’é¾çš„é ­', price: 5500, icon: 'ğŸ¦•'},
            {id: 'fo5', name: 'ç•°é½’é¾çš„èº«é«”', price: 5000, icon: 'ğŸ¦•'},
            {id: 'fo6', name: 'åŠé¾çš„é ­', price: 5000, icon: 'ğŸ¦•'},
            {id: 'fo7', name: 'ä¸‰è‘‰èŸ²', price: 1300, icon: 'ğŸš'},
            {id: 'fo8', name: 'ç¥ç€', price: 1200, icon: 'ğŸ’'},
            {id: 'fo9', name: 'èŠçŸ³', price: 1100, icon: 'ğŸš'},
            {id: 'fo10', name: 'æé¾è…³å°', price: 1000, icon: 'ğŸ¾'}
        ];

        // ç´ æ (ç„¡æ™‚é–“)
        const materialData = [
            {id: 'm1', name: 'é‡‘ç¤¦çŸ³', price: 10000, icon: 'ğŸ’'},
            {id: 'm2', name: 'éµç¤¦çŸ³', price: 375, icon: 'ğŸª¨'},
            {id: 'm3', name: 'èœ‚çª©', price: 300, icon: 'ğŸ'},
            {id: 'm4', name: 'ç«¹ç­', price: 250, icon: 'ğŸ'},
            {id: 'm5', name: 'é»åœŸ', price: 100, icon: 'ğŸ§±'},
            {id: 'm6', name: 'çŸ³é ­', price: 100, icon: 'ğŸª¨'},
            {id: 'm7', name: 'ç«¹å­', price: 80, icon: 'ğŸ'},
            {id: 'm8', name: 'æœ¨æ', price: 60, icon: 'ğŸªµ'},
            {id: 'm9', name: 'é›œè‰', price: 10, icon: 'ğŸŒ¿'},
            {id: 'm10', name: 'æ‰‡è²æ®¼', price: 900, icon: 'ğŸš'},
            {id: 'm11', name: 'æµ·èºæ®¼', price: 700, icon: 'ğŸš'},
            {id: 'm12', name: 'çŠç‘š', price: 500, icon: 'ğŸª¸'},
            {id: 'm13', name: 'æ²™éŒ¢', price: 120, icon: 'âšª'}
        ];

        // å®¶å…· (ç„¡æ™‚é–“)
        const furnitureData = [
            {id: 'fu1', name: 'å™´æ³‰', price: 11700, price2x: 23400, icon: 'â›²'},
            {id: 'fu2', name: 'è²æ®¼åºŠé‹ª', price: 10200, price2x: 20400, icon: 'ğŸ›Œ'},
            {id: 'fu3', name: 'é‘„éµæœ¨DIYæ¡Œ', price: 8520, price2x: 17040, icon: 'ğŸ”¨'},
            {id: 'fu4', name: 'éœ²å¤©æ± ', price: 4350, price2x: 8700, icon: 'â™¨ï¸'},
            {id: 'fu5', name: 'è³èŠ±çµ„åˆ', price: 4000, price2x: 8000, icon: 'ğŸ±'},
            {id: 'fu6', name: 'é‘„éµæœ¨çŸ®æ«ƒ', price: 3840, price2x: 7680, icon: 'ğŸ—„ï¸'},
            {id: 'fu7', name: 'æœ¨å‰ä»–', price: 3210, price2x: 6420, icon: 'ğŸ¸'},
            {id: 'fu8', name: 'ç‹—å±‹', price: 2040, price2x: 4080, icon: 'ğŸ '},
            {id: 'fu9', name: 'çŸ³ç¢‘', price: 1800, price2x: 3600, icon: 'ğŸª¦'},
            {id: 'fu10', name: 'å¹³åº•é‹', price: 1500, price2x: 3000, icon: 'ğŸ³'}
        ];

        // --- è³‡æ–™åº«æ•´åˆ ---
        const db = {
            fish: fishData,
            bug: bugData,
            sea: seaData,
            fossil: fossilData,
            material: materialData,
            furniture: furnitureData
        };

        // --- 2. ç‹€æ…‹ç®¡ç† ---
        let state = {
            category: 'fish',
            filterNow: false,
            filterUncaught: false,
            searchText: '',
            caughtList: JSON.parse(localStorage.getItem('acnh_caught_v3')) || [] 
        };

        // --- 3. æ ¸å¿ƒé‚è¼¯ ---

        function saveProgress() {
            localStorage.setItem('acnh_caught_v3', JSON.stringify(state.caughtList));
            updateStats();
        }

        function toggleCatch(id) {
            if (state.caughtList.includes(id)) {
                state.caughtList = state.caughtList.filter(item => item !== id);
            } else {
                state.caughtList.push(id);
            }
            saveProgress();
            renderGrid();
        }

        function updateStats() {
            const total = db[state.category].length;
            const currentCatIds = db[state.category].map(i => i.id);
            const caughtCount = state.caughtList.filter(id => currentCatIds.includes(id)).length;
            const percent = total === 0 ? 0 : (caughtCount / total) * 100;
            
            document.getElementById('progress-bar').style.width = `${percent}%`;
            document.getElementById('stats-display').innerText = 
                `${getCatName(state.category)}æ”¶é›†é€²åº¦ï¼š${caughtCount} / ${total}`;
        }

        function getCatName(cat) {
            const names = {fish:'é­šé¡', bug:'æ˜†èŸ²', sea:'æµ·æ´‹ç”Ÿç‰©', fossil:'åŒ–çŸ³', material:'ç´ æ', furniture:'å®¶å…·'};
            return names[cat] || cat;
        }

        function isAvailable(item) {
            // å¦‚æœè©²é¡åˆ¥æ²’æœ‰æ™‚é–“é™åˆ¶ (åŒ–çŸ³/ç´ æ/å®¶å…·)ï¼Œæ°¸é å›å‚³ true
            if (!item.months) return true;

            const now = new Date();
            const m = now.getMonth() + 1;
            const h = now.getHours();

            if (!item.months.includes(m)) return false;
            
            const [start, end] = item.time;
            if (start === 0 && end === 24) return true;
            if (start < end) return h >= start && h < end;
            return h >= start || h < end;
        }

        // --- 4. ä»‹é¢æ“ä½œ ---

        function switchTab(cat) {
            state.category = cat;
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // è™•ç†ç¯©é¸æŒ‰éˆ•çš„é¡¯ç¤º (åŒ–çŸ³å®¶å…·ä¸éœ€è¦ "åªçœ‹ç¾åœ¨")
            const hasTime = ['fish', 'bug', 'sea'].includes(cat);
            document.getElementById('btn-now').style.display = hasTime ? 'inline-block' : 'none';
            if (!hasTime) { state.filterNow = false; document.getElementById('btn-now').classList.remove('active'); }

            updateStats();
            renderGrid();
        }

        function toggleNow() {
            state.filterNow = !state.filterNow;
            document.getElementById('btn-now').classList.toggle('active');
            renderGrid();
        }

        function toggleUncaught() {
            state.filterUncaught = !state.filterUncaught;
            document.getElementById('btn-uncaught').classList.toggle('active');
            renderGrid();
        }

        function handleSearch() {
            state.searchText = document.getElementById('search-input').value.toLowerCase();
            renderGrid();
        }

        // --- 5. æ¸²æŸ“å¼•æ“ ---
        // --- 5. æ¸²æŸ“å¼•æ“ (ä¿®æ­£åœ–ç¤ºé¡¯ç¤ºå•é¡Œ) ---
        function renderGrid() {
            const container = document.getElementById('grid-container');
            container.innerHTML = '';

            const data = db[state.category];
            const isTimeCategory = ['fish', 'bug', 'sea'].includes(state.category);

            data.forEach(item => {
                const isCaught = state.caughtList.includes(item.id);
                const active = isAvailable(item);

                // ç¯©é¸é‚è¼¯
                if (state.searchText && !item.name.includes(state.searchText)) return;
                if (state.filterNow && isTimeCategory && !active) return;
                if (state.filterUncaught && isCaught) return;

                const card = document.createElement('div');
                card.className = `card ${isCaught ? 'caught' : ''}`;
                card.onclick = () => toggleCatch(item.id);

                // --- ä¿®æ­£é»ï¼šåœ–ç¤ºé˜²å‘†è™•ç† ---
                // å¦‚æœè³‡æ–™æœ¬èº«æ²’æœ‰ iconï¼Œå°±æ ¹æ“šé¡åˆ¥çµ¦ä¸€å€‹é è¨­åœ–ç¤º
                let displayIcon = item.icon;
                if (!displayIcon) {
                    if (state.category === 'fish') displayIcon = 'ğŸŸ';
                    else if (state.category === 'bug') displayIcon = 'ğŸ¦‹';
                    else if (state.category === 'sea') displayIcon = 'ğŸ¤¿';
                    else if (state.category === 'fossil') displayIcon = 'ğŸ¦•';
                    else if (state.category === 'material') displayIcon = 'ğŸ¥¥';
                    else if (state.category === 'furniture') displayIcon = 'ğŸª‘';
                    else displayIcon = 'â“';
                }

                // --- ç”¢ç”Ÿ Badge æ¨™ç±¤èˆ‡è³‡è¨Š ---
                let badge = '';
                let metaInfo = '';

                if (state.category === 'furniture') {
                    metaInfo = `ğŸ’° å•†åº—: $${item.price}<br><span style="color:#E65100; font-weight:bold;">ğŸ”¥ 2å€: $${item.price2x}</span>`;
                } else if (!isTimeCategory) {
                    metaInfo = `ğŸ’° åƒ¹æ ¼: $${item.price}`;
                } else {
                    let timeStr = (item.time[0]===0 && item.time[1]===24) ? "å…¨å¤©" : `${item.time[0]}:00~${item.time[1]}:00`;
                    badge = active 
                        ? `<span class="time-badge bg-active">ç¾åœ¨å¯æŠ“</span>` 
                        : `<span class="time-badge bg-inactive">ä¼‘æ¯ä¸­</span>`;
                    
                    const loc = item.loc ? `ğŸ“ ${item.loc}` : '';
                    const shadow = item.shadow ? `ğŸ“ ${item.shadow}` : '';
                    metaInfo = `${loc} ${shadow}<br><span class="price-tag">ğŸ’° $${item.price}</span>`;
                    metaInfo += `<br><span style="font-size:0.75rem; color:#888;">ğŸ•’ ${timeStr}</span>`;
                }

                card.innerHTML = `
                    <div class="card-icon">${displayIcon}</div>
                    <div class="card-info">
                        <h3>${item.name}</h3>
                        <div class="meta-tags">${metaInfo}</div>
                        ${badge}
                    </div>
                `;
                container.appendChild(card);
            });

            if(container.innerHTML === '') {
                container.innerHTML = '<div style="width:100%; text-align:center; color:#999; padding:20px;">æ‰¾ä¸åˆ°ç¬¦åˆçš„è³‡æ–™ ğŸ§</div>';
            }
        }
// --- 6. å•Ÿå‹•ç¨‹å¼ (é€™æ˜¯åŸæœ¬å°‘æ‰çš„éƒ¨åˆ†) ---
        window.onload = function() {
            updateStats(); // æ›´æ–°é€²åº¦æ¢
            renderGrid();  // æ¸²æŸ“å¡ç‰‡
        };
    </script>
</body>

</html>
